<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dev Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/frappe-gantt/0.6.1/frappe-gantt.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/frappe-gantt/0.6.1/frappe-gantt.min.js"></script>

    <style id="dynamic-styles"></style>

    <link rel="stylesheet" href="index.css">

</head>

<body>

    <div class="body-wrapper">
        <h1>Software Development Tracker</h1>

        <div class="controls-wrapper">
            <div style="display:flex; gap:10px; align-items:center;">
                <button id="auth-btn" class="button btn-unlock" onclick="toggleEditMode()">ðŸ”’ Unlock Editing</button>

                <button id="add-btn" class="button btn-add hidden" onclick="openAddModal()">+ New Task</button>

                <select id="assignee-filter" onchange="redrawChart()">
                    <option value="All">All Developers</option>
                </select>

                <div id="type-filter-wrapper" class="dropdown-check-list" tabindex="100">
                    <span class="anchor" onclick="toggleTypeFilter()">Filter Types</span>
                    <ul id="type-filter-items" class="items">
                    </ul>
                </div>
            </div>

            <div class="button-group">
                <button class="button" onclick="changeView('Quarter Day', this)">Quarter Day</button>
                <button class="button" onclick="changeView('Half Day', this)">Half Day</button>
                <button class="button" onclick="changeView('Day', this)">Day</button>
                <button class="button active" onclick="changeView('Week', this)">Week</button>
                <button class="button" onclick="changeView('Month', this)">Month</button>
            </div>
        </div>

        <svg id="gantt"></svg>
    </div>

    <div id="add-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Add New Task</h3>

            <label>ID (Optional)</label>
            <input type="number" id="new-id" placeholder="Auto-generated if empty">

            <label>Task Name *</label>
            <input type="text" id="new-name" placeholder="e.g. Design Database">

            <div class="flex-row">
                <div class="flex-col">
                    <label>Start Date *</label>
                    <input type="date" id="new-start">
                </div>
                <div class="flex-col">
                    <label>End Date *</label>
                    <input type="date" id="new-end">
                </div>
            </div>

            <div class="flex-row">
                <div class="flex-col">
                    <label>Type</label>
                    <select id="new-type"></select>
                </div>
                <div class="flex-col">
                    <label>Assignee</label>
                    <select id="new-assignee"></select>
                </div>
            </div>

            <label>Progress (%)</label>
            <input type="number" id="new-progress" min="0" max="100" value="0">

            <label>Task URL</label>
            <input type="text" id="new-url" placeholder="https://...">

            <label>Description</label>
            <textarea id="new-desc" rows="3"></textarea>

            <div class="modal-actions">
                <button class="button" onclick="closeAddModal()">Cancel</button>
                <button class="btn-save" onclick="saveNewTask()">Create</button>
            </div>
        </div>
    </div>

    <div id="password-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Admin Login</h3>
            <label>Enter Password:</label>
            <input type="password" id="admin-pass" onkeyup="if(event.key==='Enter') verifyPassword()">
            <div class="modal-actions">
                <button class="button" onclick="closePassModal()">Cancel</button>
                <button class="btn-save" onclick="verifyPassword()">Unlock</button>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>

</html>